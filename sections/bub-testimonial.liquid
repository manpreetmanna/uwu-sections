{{ 'bub-testimonial.css' | asset_url | stylesheet_tag }}

{%- liquid
  assign fallback_background_url = 'https://lh3.googleusercontent.com/aida-public/AB6AXuC1YwpQzv9IcdMzWZRcpI9EqyGdpAy3YA-ajFxXOvG6I19gsvB6kmTinzmRfaUfpxkGqzwvqiWQ7wZBCanAeVfQ8osRi7ni6gKsdBG96Zp7ruVK-lLsRrAwgYnG9gry1X0PSX050b9ZzqwGxymO3D7_KzMFaNHxDF0a8dTUHDEGZQ00WDp7bs7lQ3Djv7NrZo625RuKuf65gS84mfnKIaA8wdsNdDsSECDKFLWR4kGixBVR-63PXcVyZJiLqWSh0pzbfzCfnxhoZsYc'
  assign background_url = fallback_background_url
  if section.settings.background_image != blank
    assign background_url = section.settings.background_image | image_url: width: 1600
  endif
-%}

<section class="testimonial-section bub-testimonial bub-scope">
  <div class="container-sm testimonial-card" style="background-image: url('{{ background_url }}');">
    <div class="testimonial-overlay"></div>
    <div class="testimonial-content">
      <span class="material-symbols-outlined quote-icon"> format_quote </span>
      <h2>
        {{ section.settings.quote | escape | newline_to_br }}
      </h2>
      <div class="testimonial-author">
        <div class="author-photo">
          {% if section.settings.author_photo != blank %}
            {{
              section.settings.author_photo
              | image_url: width: 240
              | image_tag: alt: section.settings.author_name, loading: 'lazy', width: 240, height: 240
            }}
          {% else %}
            {{ 'image' | placeholder_svg_tag: 'placeholder-svg' }}
          {% endif %}
        </div>
        <div class="author-info">
          <p class="author-name">{{ section.settings.author_name | escape }}</p>
          <p class="author-role">{{ section.settings.author_role | escape }}</p>
        </div>
      </div>
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Bub Testimonial",
  "settings": [
    {
      "type": "textarea",
      "id": "quote",
      "label": "Quote",
      "default": "\"UwUMarket took my merch from basic screen-prints to a premium fashion line. The quality and global fulfillment are absolute game-changers.\""
    },
    {
      "type": "text",
      "id": "author_name",
      "label": "Author name",
      "default": "Sarah Jenkins"
    },
    {
      "type": "text",
      "id": "author_role",
      "label": "Author role",
      "default": "Lifestyle Creator â€¢ 2.4M Fans"
    },
    {
      "type": "image_picker",
      "id": "background_image",
      "label": "Background image"
    },
    {
      "type": "image_picker",
      "id": "author_photo",
      "label": "Author photo"
    }
  ],
  "presets": [
    {
      "name": "Bub Testimonial"
    }
  ]
}
{% endschema %}
